// SPDX-License-Identifier: MIT
// OpenZeppelin Midnight Apps Contracts v0.0.1-alpha.0 (access/test/AccessControl.mock.compact)

pragma language_version >= 0.20.0;

import CompactStandardLibrary;

import "../../../AccessControl" prefix AccessControl_;

// Export circuits for testing purposes
export { AccessControl_hashUserRole,
         AccessControl_roleCommits,
         AccessControl_isInitialized,
         AccessControl_index,
         AccessControl_Role};

export {
  ZswapCoinPublicKey,
  MerkleTreePath,
  MerkleTreeDigest,
  Maybe
}


/**
 * @description Constructs the contract by initializing the AccessControl module with an initial admin.
 * @param {ZswapCoinPublicKey} initialAdmin - The public key of the initial admin.
 * @returns {[]} - An empty array indicating successful initialization.
 * @throws {RoleError} - If the contract is already initialized (inherited from AccessControl).
 */
constructor(initialAdmin: ZswapCoinPublicKey) {
  return AccessControl_initialize(initialAdmin);
}

/**
 * @description Test circuit to grant a role to a user, wrapping AccessControl's grantRole.
 * @param {ZswapCoinPublicKey} user - The public key of the user to grant the role to.
 * @param {AccessControl_Role} role - The role to grant (Admin, Lp, Trader, or None).
 * @returns {[]} - An empty array indicating success.
 * @throws {RoleError} - If the contract is not initialized, caller is not Admin, or the role tree is full.
 */
export circuit testGrantRole(user: ZswapCoinPublicKey, role: AccessControl_Role): [] {
  return AccessControl_grantRole(user, role);
}
